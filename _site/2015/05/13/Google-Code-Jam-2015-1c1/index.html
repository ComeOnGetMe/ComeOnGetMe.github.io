<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="关于程序与设计、黑客与画家 | 黄玄，Web & Mobile Lover，Software Engineer，UX Designer | 这里是 @Hux黄玄 的个人博客，与你一起发现更大的世界。">
    <meta name="keywords"  content="阎志鹏, 阎志鹏的博客, 博客, 个人网站, 互联网, Web, Machine Learning, Autonomous Driving">
    <meta name="theme-color" content="#000000">
    
    <!-- Open Graph -->
    <meta property="og:title" content="解题报告：Google Code Jam 2015 Round1C Q1 - 阎志鹏的博客 | Zhipeng's Blog">
    
    <meta property="og:type" content="article">
    <meta property="og:description" content="
  原题地址在这里


">
    
    <meta property="article:published_time" content="2015-05-13T00:00:00Z">
    
    
    <meta property="article:author" content="Zhipeng">
    
    
    <meta property="article:tag" content="Google code jam">
    
    
    <meta property="og:image" content="http://localhost:4000/img/patrick.jpg">
    <meta property="og:url" content="http://localhost:4000/2015/05/13/Google-Code-Jam-2015-1c1/">
    <meta property="og:site_name" content="阎志鹏的博客 | Zhipeng's Blog">
    
    <title>解题报告：Google Code Jam 2015 Round1C Q1 - 阎志鹏的博客 | Zhipeng's Blog</title>

    <!-- Web App Manifest -->
    <link rel="manifest" href="/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="http://localhost:4000/2015/05/13/Google-Code-Jam-2015-1c1/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->

<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Zhipeng's Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                    
                    
                    
                    <li>
                        <a href="/about/">About</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="/archive/">Archive</a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    var __HuxNav__ = {
        close: function(){
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        },
        open: function(){
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }

    // Bind Event
    $toggle.addEventListener('click', function(e){
        if ($navbar.className.indexOf('in') > 0) {
            __HuxNav__.close()
        }else{
            __HuxNav__.open()
        }
    })

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from 
     * $toggle/$collapse will break global delegation.
     * 
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.  
     *
     * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener('click', function(e){
        if(e.target == $toggle) return;
        if(e.target.className == 'icon-bar') return;
        __HuxNav__.close();
    })
</script>


    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/home-bg.jpg" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('/img/home-bg.jpg');
        background: ;
    }

    
</style>

<header class="intro-header" >

    <div class="header-mask"></div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/archive/?tag=Google+code+jam" title="Google code jam">Google code jam</a>
                        
                    </div>
                    <h1>解题报告：Google Code Jam 2015 Round1C Q1</h1>
                    
                    <h2 class="subheading"></h2>
                    <span class="meta">Posted by Zhipeng on May 13, 2015</span>
                </div>
            </div>
        </div>
    </div>
</header>






<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <!-- Multi-Lingual -->
                

				<blockquote>
  <p><a href="https://code.google.com/codejam/contest/4244486/dashboard">原题地址在这里</a></p>
</blockquote>

<h2 id="原题">原题</h2>

<p><strong>Problem A. Brattleship</strong></p>

<p>You’re about to play a simplified “battleship” game with your little brother. The board for this game is a rectangular grid with R rows and C columns. At the start of the game, you will close your eyes, and you will keep them closed until the end of the game. Your little brother will take a single rectangular 1 x W ship and place it horizontally somewhere on the board. The ship must always fit entirely on the board, with each cell of the ship occupying exactly one of the grid’s cells, and it can never be rotated.</p>

<p>In each turn of the game, you name a cell on the board, and your little brother tells you whether that is a hit (one of the cells occupied by the ship) or a miss. (Your little brother doesn’t say which part of the ship was hit – just that the cell you named has a part of the ship in it.) You have perfect memory, and can keep track of all the information he has given you. Once you have named all of the cells occupied by the ship, the game is over (the ship is sunk), and your score is the number of turns taken. Your goal is to minimize your score.</p>

<p>Although the ship is not supposed to be moved once it is placed, you know that your little brother, who is a brat, plans to cheat by changing the location of the ship whenever he wants, as long as the ship remains horizontal and completely on the board, and the new location is consistent with all the information he has given so far. For example, for a 1x4 board and 1x2 ship, your little brother could initially place the ship such that it overlaps the leftmost two columns. If your first guess was row 1, column 2, he could choose to secretly move the ship to the rightmost two columns, and tell you that (1, 2) was a miss. If your next guess after that was (1, 3), though, then he could not say that was also a miss and move the ship back to its original location, since that would be inconsistent with what he said about (1, 2) earlier.</p>

<p>Not only do you know that your little brother will cheat, he knows that you know. If you both play optimally (you to minimize your score, him to maximize it), what is the lowest score that you can guarantee you will achieve, regardless of what your little brother does?</p>

<p><strong>Input</strong></p>

<p>The first line of the input gives the number of test cases, T. T lines follow, each with three space-separated integers R, C, and W: the number of rows and columns of the board, followed by the width of the ship.</p>

<p><strong>Output</strong></p>

<p>For each test case, output one line containing “Case #x: y”, where x is the test case number (starting from 1) and y is the minimum score you can guarantee.</p>

<p><strong>Limits</strong><br />
1 ≤ W ≤ C.</p>

<p>Small dataset<br />
T = 55.<br />
R = 1.
1 ≤ C ≤ 10.</p>

<p>Large dataset<br />
1 ≤ T ≤ 100. 
1 ≤ R ≤ 20.<br />
1 ≤ C ≤ 20.</p>

<p><strong>Sample</strong></p>

<p>Input</p>

<p>3<br />
1 4 2<br />
1 7 7<br />
2 5 1</p>

<p>Output</p>

<p>Case #1: 3<br />
Case #2: 7<br />
Case #3: 10</p>

<p>In Case #1, the board has one row and four columns, and the ship takes up one row and two columns. One optimal strategy is for you to start by naming cell (1, 2):</p>

<p>If your little brother says it is a hit, then the other cell of the 1x2 ship must be in either (1, 1) or (1, 3), and you just have to name both. If you happen to correctly name the cell where the other part of the ship is, your little brother will just reposition the ship so that (1, 2) is still hit, but your guess is a miss. Notice that your little brother can still move the ship even after it has been hit, as long as the new position is not inconsistent with the information he has already given.</p>

<p>If your little brother says it is a miss, then the only remaining consistent scenario is that the ship is in (1, 3) and (1, 4), and your little brother will be unable to change this from now on; you just need to name those two cells.</p>

<p>So no matter what your little brother does after you say (1, 2), you can finish the game in two more moves after that, for a total of three moves.</p>

<p>Moreover, a three-move solution is optimal, because it is impossible to guarantee a finish in only two moves: without loss of generality, pick a first move. No matter what you pick, there is still a 1x2 area open and your little brother can just move the ship there and claim that you missed. It is impossible for you to sink that ship, which has not yet been hit, with only one more move.</p>

<p>In Case #2, the ship completely fills in the board and so your little brother has only one place to put it. All you have to do is name every cell.</p>

<p>In Case #3, your little brother can always move the 1x1 ship to a cell you have not tried yet, so you must name all 10 cells, only finally getting a hit (and immediately sinking the ship) on the last one.</p>

<h2 id="题意">题意</h2>

<p>简单翻译一下就是，你和基友在玩一个新游戏叫做‘战船’。具体玩法是，你全程闭眼，他会在一个 R x C 的棋盘上某处放一只 1 x W 的船，（R，C，W 你们会事先商量好）然后每回合你可以炸掉棋盘上的任意一格；如果打中战船，基友会说‘hit’，反之则说‘miss’；直到战船所在的每一个格子都被击中，游戏结束。</p>

<p>本来游戏规则就到这为止，但是你的基友很烂，他会耍赖：每次等你开炮之后，无论船是否被击中，只要还有其他地方让船能够避开攻击，他都会将船移动过去并说‘miss’。问在两个人都非常聪明的情况下，你最少需要多少回合才能保证把整艘船击沉？</p>

<h2 id="解法">解法</h2>

<p>这个题难度主要在于想清楚游戏过程。我们在炸格子的过程中，实际上基友会不断地移动船的位置，直到船无处可逃为止。很快能够注意到因为船始终是横置的，所以行数 R 对游戏结果的影响不大，对于最后一行以外的其他行，我们只需要每 W 格炸掉一格就可以排除掉整行（这时候基友会将船移动到下一行）。那么对于这（R-1）行，我们只需要炸（R-1）x（C/W）次，就可以将问题简化为 1 x C 的问题。</p>

<p>剩下就是怎样解决 1 x C 的问题了。假设 C 远大于 W，我们仍然可以每 W 格炸一次来排除掉大部分的位置（这个过程中基友仍然会说miss）。需要注意的是，当剩下的格子数小于或等于 2W 时，我们最少需要 W+1 次来保证炸光整条船。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>
☐☐☒☐☐☐ (miss) -&gt; ☐☐☒☒☐☐ (hit) -&gt; ☐☐☒☒☒☐ (hit) -&gt; ☐☐☒☒☒☒ (hit)

</pre></td></tr></tbody></table></code></pre></div></div>

<p>如图，C = 6，W = 3的情况，首先我们在靠近中间的位置炸一格，基友说miss（这里如果说hit，结果也是一样的。why？），我们便确定是在右边的三格，即总共需要炸四次可以结束游戏。对于其他 W 和 C 的值，只要 W &lt; C &lt;= 2W，总次数都是 W+1 次，不清楚的同学们可以自己去画一下。</p>

<p>讲得这里这个题思路就非常清晰了，也不需要再回头去看数据大小了，因为只有加减乘除，无论Input多大，只要没有Overflow我们都可以通过这个过程很快的得出答案。以下为代码：</p>

<h2 id="python">Python</h2>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1"># Actually you don't need to divide it into
# 4 cases, here I just want to make it clear. 
</span><span class="k">def</span> <span class="nf">solution</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">w</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">r</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">solution</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">r</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">c</span> <span class="o">/</span> <span class="n">w</span><span class="p">)</span>
	<span class="k">elif</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="mi">2</span>\<span class="o">*</span><span class="n">w</span><span class="p">:</span>
		<span class="n">tmp</span> <span class="o">=</span> <span class="n">c</span> <span class="o">/</span> <span class="n">w</span> <span class="o">-</span> <span class="mi">1</span>
		<span class="k">return</span> <span class="n">solution</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span> <span class="o">-</span> <span class="n">tmp</span> <span class="o">*</span> <span class="n">w</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span> <span class="o">+</span> <span class="n">tmp</span>
	<span class="k">elif</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="n">w</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">w</span> <span class="o">+</span> <span class="mi">1</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">w</span></code></pre></figure>



                <hr style="visibility: hidden;">
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2015/05/10/alibaba-internship-interview/" data-toggle="tooltip" data-placement="top" title="阿里校招实习生面经">
                        Previous<br>
                        <span>阿里校招实习生面经</span>
                        </a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2015/05/15/Google-Code-Jam-2015-1c2/" data-toggle="tooltip" data-placement="top" title="解题报告：Google Code Jam 2015 Round1C Q2">
                        Next<br>
                        <span>解题报告：Google Code Jam 2015 Round1C Q2</span>
                        </a>
                    </li>
                    
                </ul>
                <hr style="visibility: hidden;">

                

                
            </div>  

    <!-- Side Catalog Container -->
        

    <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                


<section>
    
        <hr class="hidden-sm hidden-xs">
    
    <h5><a href="/archive/">FEATURED TAGS</a></h5>
    <div class="tags">
        
        
        
        </a>
        
        
                <a data-sort="0002" 
                    href="/archive/?tag=Google+code+jam"
                    title="Google code jam"
                    rel="3">Google code jam
    </div>
</section>


                <!-- Friends Blog -->
                
<hr>
<h5>FRIENDS</h5>
<ul class="list-inline">
  
</ul>

            </div>
        </div>
    </div>
</article>

<!-- add support for mathjax by voleking-->









<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  
  
  <li>
    <a target="_blank" href="https://www.zhihu.com/people/yan-xiao-peng">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa  fa-stack-1x fa-inverse">知</i>
      </span>
    </a>
  </li>
  
  
  
  
  <li>
    <a target="_blank" href="https://github.com/comeongetme">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
</ul>

                <p class="copyright text-muted">
                    Copyright &copy; Zhipeng's Blog 2019
                    <br>
                    Powered by <a href="http://huangxuan.me">Hux Blog</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=huxpro&repo=huxpro.github.io&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js "></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->





<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->



<!-- Baidu Tongji -->



<!-- Side Catalog -->



<!-- Multi-Lingual -->




<!-- Image to hack wechat -->
<img src="/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
